(this["webpackJsonptprs-nihongo"]=this["webpackJsonptprs-nihongo"]||[]).push([[0],{28:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_0.02ab68d4.yaml"},29:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_1.e66cd891.yaml"},30:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_2.93d75634.yaml"},31:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_3.6fcd9b2c.yaml"},32:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_4.1bddbbb0.yaml"},33:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_5.3f1c5526.yaml"},34:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_6.5ac50b4d.yaml"},35:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_7.1fd2d205.yaml"},36:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_8.338edfbd.yaml"},37:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_9.f2417162.yaml"},38:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_10.e9781bfc.yaml"},39:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_11.9f275a4f.yaml"},40:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_12.d4403ff5.yaml"},41:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_13.ef2cddef.yaml"},42:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_14.3654ae15.yaml"},46:function(e,t,n){e.exports=n.p+"static/media/data.7afd0079.yaml"},50:function(e,t,n){e.exports=n(96)},55:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(23),o=n.n(r),s=(n(55),n(48)),c=n(8),u=n(3),l=n(49),d=n(47),f=n(4),m=n(5),p=n(12),h=n.n(p),v=n(24),y=function(){function e(t){Object(c.a)(this,e),this.recognition=void 0;var n=window;this.recognition=new(n.SpeechRecognition||n.webkitSpeechRecognition||n.mozSpeechRecognition||n.msSpeechRecognition),this.recognition.lang="ja-JP",this.recognition.interimResults=!1,this.recognition.maxAlternatives=5,this.recognition.onresult=t}return Object(u.a)(e,null,[{key:"isPossible",value:function(){var e=window;return e.SpeechRecognition||e.webkitSpeechRecognition||e.mozSpeechRecognition||e.msSpeechRecognition}}]),Object(u.a)(e,[{key:"start",value:function(){this.recognition.start()}}]),e}(),g=n(16),k=n(27);function j(e,t){return new Promise((function(n,i){var a=new XMLHttpRequest;a.withCredentials=!0,a.addEventListener("load",(function(){200===a.status?n(a):i(a)})),a.addEventListener("error",(function(){i(a)})),a.addEventListener("abort",(function(){i(a)})),a.open(e,t),a.send()}))}var b=n(28),x=n.n(b),_=n(29),E=n.n(_),w=n(30),S=n.n(w),R=n(31),C=n.n(R),L=n(32),O=n.n(L),T=n(33),P=n.n(T),z=n(34),A=n.n(z),B=n(35),D=n.n(B),J=n(36),V=n.n(J),G=n(37),I=n.n(G),M=n(38),N=n.n(M),U=n(39),W=n.n(U),q=n(40),F=n.n(q),H=n(41),K=n.n(H),X=n(42),$=n.n(X);function Q(){var e=Object(f.a)(["\n  font-size: 2rem;\n"]);return Q=function(){return e},e}var Y=[x.a,E.a,S.a,C.a,O.a,P.a,A.a,D.a,V.a,I.a,N.a,W.a,F.a,K.a,$.a],Z=m.a.span(Q());function ee(e){var t=k.groupBy(e.dicEntry.reading_meaning.rmgroup.reading,"typ"),n=e.dicEntry.literal;return t.ja_kun.length>0?n=t.ja_kun[0].text:t.ja_on.length>0&&(n=t.ja_on[0].text),a.a.createElement(Z,null,a.a.createElement("ruby",null,e.dicEntry.literal,a.a.createElement("rt",null,n)))}var te=function(){function e(){var t=this;Object(c.a)(this,e),this.data={},Y.forEach((function(e){j("GET",e).then((function(e){var n=h.a.load(e.response);Object.keys(n).forEach((function(e){return t.data[e]=n[e]}))})).catch((function(t){return console.error("Error loading ".concat(e),t)}))}))}return Object(u.a)(e,[{key:"lookup",value:function(e){return this.data[e]}},{key:"renderString",value:function(e){var t=this.lookup(e);return t?a.a.createElement(ee,{dicEntry:t}):a.a.createElement(Z,null,e)}},{key:"makePhrase",value:function(e){var t=this;return g.tokenize(e).map((function(e){return g.isKanji(e)?Array.from(e).map((function(e){return t.renderString(e)})):a.a.createElement(Z,null,e)})).flat()}}]),e}(),ne=n(46),ie=n.n(ne);function ae(){var e=Object(f.a)(["\n  font-size: 2rem;\n  width: 100%;\n"]);return ae=function(){return e},e}function re(){var e=Object(f.a)(["\n  padding-left: 1rem;\n  font-size: 1.5em;\n  color: orangered;\n"]);return re=function(){return e},e}function oe(){var e=Object(f.a)([""]);return oe=function(){return e},e}function se(){var e=Object(f.a)(["\n  @media screen and (min-width: 60rem) {\n  width: 60rem;\n  margin: 0 auto;\n  }\n"]);return se=function(){return e},e}var ce=m.a.div(se()),ue=m.a.span(oe()),le=m.a.h1(re()),de=m.a.button(ae()),fe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).recognizer=void 0,i.kanjiDic=new te,console.log("new App()"),j("GET",ie.a).then((function(e){h.a.load(e.response)})).catch((function(e){return console.error(e)})),i.state={src:"FsiAxc5T23g",stopTimes:[165,178],lastListenResults:[]},y.isPossible()&&(i.recognizer=new y((function(e){return i.listenCallback(e)}))),i}return Object(u.a)(n,[{key:"play",value:function(){var e;null===(e=this.state.player)||void 0===e||e.playVideo(),this.forceUpdate()}},{key:"pause",value:function(){var e;null===(e=this.state.player)||void 0===e||e.pauseVideo(),this.forceUpdate()}},{key:"setLastListenResults",value:function(e){this.setState({src:this.state.src,stopTimes:this.state.stopTimes,lastListenResults:e})}},{key:"listenCallback",value:function(e){if(console.log("listenCallback"),console.dir(e),e.results.length>0){var t=Array.from(e.results[0]).map((function(e){return e.transcript}));this.setLastListenResults(t)}}},{key:"listen",value:function(){var e;null===(e=this.recognizer)||void 0===e||e.start()}},{key:"getNextStopTime",value:function(){var e,t,n,i=(null===(e=this.state.player)||void 0===e?void 0:e.getCurrentTime())||0,a=(null===(t=this.state.player)||void 0===t?void 0:t.getDuration())||0,r=Object(s.a)(this.state.stopTimes);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(i<o)return o}}catch(c){r.e(c)}finally{r.f()}return a}},{key:"onPlayerStateChange",value:function(e){var t=this;if(this.state.timer&&clearTimeout(this.state.timer),1===e.data){var n,i=(null===(n=this.state.player)||void 0===n?void 0:n.getCurrentTime())||0,a=this.getNextStopTime();if(i+.4<a){var r,o=(a-i)/((null===(r=this.state.player)||void 0===r?void 0:r.getPlaybackRate())||1);this.setState({src:this.state.src,stopTimes:this.state.stopTimes,timer:setTimeout((function(){return t.pause()}),1e3*o)})}}else this.setState({timer:null})}},{key:"onPlayerReady",value:function(e){this.setState({player:e.target})}},{key:"renderContinueButton",value:function(){var e,t=this,n="Continue ->",i=function(){return t.play()};return 1===(null===(e=this.state.player)||void 0===e?void 0:e.getPlayerState())&&(n="Pause ||",i=function(){return t.pause()}),a.a.createElement(de,{onClick:i},n)}},{key:"renderListener",value:function(){var e=this;if(!this.recognizer)return a.a.createElement("span",null);var t=this.state.lastListenResults.map((function(t){return a.a.createElement(de,{key:t,onClick:function(){return e.setLastListenResults([t])}},e.kanjiDic.makePhrase(t))}));return a.a.createElement(ue,null,a.a.createElement(de,{onClick:function(){return e.listen()}},"Listen"),t)}},{key:"render",value:function(){var e=this,t={width:"960",height:"473",playerVars:{autoplay:0,start:70}};return a.a.createElement(ce,null,a.a.createElement("header",null,a.a.createElement(le,null,"T.P.R.S. \u65e5\u672c\u8a9e")),a.a.createElement(v.a,{videoId:this.state.src,opts:t,onStateChange:function(t){return e.onPlayerStateChange(t)},onReady:function(t){return e.onPlayerReady(t)}}),this.renderContinueButton(),this.renderListener())}}]),n}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[50,1,2]]]);
//# sourceMappingURL=main.8e986938.chunk.js.map