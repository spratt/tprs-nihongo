(this["webpackJsonptprs-nihongo"]=this["webpackJsonptprs-nihongo"]||[]).push([[0],{27:function(e,t,n){e.exports=n.p+"static/media/data.7afd0079.yaml"},28:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_0.02ab68d4.yaml"},29:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_1.e66cd891.yaml"},30:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_2.93d75634.yaml"},31:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_3.6fcd9b2c.yaml"},32:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_4.1bddbbb0.yaml"},33:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_5.3f1c5526.yaml"},34:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_6.5ac50b4d.yaml"},35:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_7.1fd2d205.yaml"},36:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_8.338edfbd.yaml"},37:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_9.f2417162.yaml"},38:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_10.e9781bfc.yaml"},39:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_11.9f275a4f.yaml"},40:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_12.d4403ff5.yaml"},41:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_13.ef2cddef.yaml"},42:function(e,t,n){e.exports=n.p+"static/media/kanjidic2_indexed_14.3654ae15.yaml"},49:function(e,t,n){e.exports=n(94)},54:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(22),r=n.n(o),s=(n(54),n(47)),c=n(48),l=n(46),u=n(7),d=n(12),f=n(13),p=n(8),m=n(14),h=n.n(m),v=n(23),y=n(26);function g(e,t){return new Promise((function(n,a){var i=new XMLHttpRequest;i.withCredentials=!0,i.addEventListener("load",(function(){200===i.status?n(i):a(i)})),i.addEventListener("error",(function(){a(i)})),i.addEventListener("abort",(function(){a(i)})),i.open(e,t),i.send()}))}var k=n(27),x=n.n(k),b=n(28),j=n.n(b),_=n(29),w=n.n(_),E=n(30),R=n.n(E),S=n(31),T=n.n(S),C=n(32),L=n.n(C),O=n(33),P=n.n(O),A=n(34),z=n.n(A),B=n(35),D=n.n(B),J=n(36),V=n.n(J),G=n(37),I=n.n(G),K=n(38),M=n.n(K),N=n(39),U=n.n(N),W=n(40),q=n.n(W),F=n(41),H=n.n(F),X=n(42),$=n.n(X);function Q(){var e=Object(u.a)(["\n  font-size: 2rem;\n  width: 100%;\n"]);return Q=function(){return e},e}function Y(){var e=Object(u.a)(["\n  padding-left: 1rem;\n  font-size: 1.5em;\n  color: orangered;\n"]);return Y=function(){return e},e}function Z(){var e=Object(u.a)([""]);return Z=function(){return e},e}function ee(){var e=Object(u.a)(["\n  @media screen and (min-width: 60rem) {\n  width: 60rem;\n  margin: 0 auto;\n  }\n"]);return ee=function(){return e},e}var te=[j.a,w.a,R.a,T.a,L.a,P.a,z.a,D.a,V.a,I.a,M.a,U.a,q.a,H.a,$.a],ne=function(){function e(){var t=this;Object(d.a)(this,e),this.data={},te.forEach((function(e){g("GET",e).then((function(n){console.log("KanjiDic loaded ".concat(e));var a=h.a.load(n.response);Object.keys(a).forEach((function(e){return t.data[e]=a[e]}))})).catch((function(t){return console.error("Error loading ".concat(e),t)}))}))}return Object(f.a)(e,[{key:"lookup",value:function(e){return this.data[e]}}]),e}(),ae=p.a.div(ee()),ie=p.a.span(Z()),oe=p.a.h1(Y()),re=p.a.button(Q()),se=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;Object(d.a)(this,n),(a=t.call(this,e)).recognition=void 0,a.kanjiDic=new ne,console.log("new App()"),g("GET",x.a).then((function(e){h.a.load(e.response)})).catch((function(e){return console.error(e)})),a.state={src:"FsiAxc5T23g",stopTimes:[165,178],lastListenResults:[]};var i=window;return(i.SpeechRecognition||i.webkitSpeechRecognition||i.mozSpeechRecognition||i.msSpeechRecognition)&&(a.recognition=new(i.SpeechRecognition||i.webkitSpeechRecognition||i.mozSpeechRecognition||i.msSpeechRecognition),a.recognition.lang="ja-JP",a.recognition.interimResults=!1,a.recognition.maxAlternatives=5,a.recognition.onresult=function(e){return a.listenCallback(e)}),a}return Object(f.a)(n,[{key:"play",value:function(){var e;null===(e=this.state.player)||void 0===e||e.playVideo(),this.forceUpdate()}},{key:"pause",value:function(){var e;null===(e=this.state.player)||void 0===e||e.pauseVideo(),this.forceUpdate()}},{key:"listenCallback",value:function(e){if(console.log("listenCallback"),console.dir(e),e.results.length>0){var t=Array.from(e.results[0]).map((function(e){var t=e.transcript,n=y.toKana(t);return console.log("".concat(t,"(").concat(n,")")),n===t?t:"".concat(t,"(").concat(n,")")}));this.setState({src:this.state.src,stopTimes:this.state.stopTimes,lastListenResults:t})}}},{key:"listen",value:function(){this.recognition.start()}},{key:"getNextStopTime",value:function(){var e,t,n,a=(null===(e=this.state.player)||void 0===e?void 0:e.getCurrentTime())||0,i=(null===(t=this.state.player)||void 0===t?void 0:t.getDuration())||0,o=Object(s.a)(this.state.stopTimes);try{for(o.s();!(n=o.n()).done;){var r=n.value;if(a<r)return r}}catch(c){o.e(c)}finally{o.f()}return i}},{key:"onPlayerStateChange",value:function(e){var t=this;if(this.state.timer&&clearTimeout(this.state.timer),1===e.data){var n,a=(null===(n=this.state.player)||void 0===n?void 0:n.getCurrentTime())||0,i=this.getNextStopTime();if(a+.4<i){var o,r=(i-a)/((null===(o=this.state.player)||void 0===o?void 0:o.getPlaybackRate())||1);this.setState({src:this.state.src,stopTimes:this.state.stopTimes,timer:setTimeout((function(){return t.pause()}),1e3*r)})}}else this.setState({timer:null})}},{key:"onPlayerReady",value:function(e){this.setState({player:e.target})}},{key:"renderContinueButton",value:function(){var e,t=this,n="Continue ->",a=function(){return t.play()};return 1===(null===(e=this.state.player)||void 0===e?void 0:e.getPlayerState())&&(n="Pause ||",a=function(){return t.pause()}),i.a.createElement(re,{onClick:a},n)}},{key:"renderListener",value:function(){var e=this,t=i.a.createElement("span",null);if(!this.recognition)return t;var n=t;if(1===this.state.lastListenResults.length)n=i.a.createElement("p",null,this.state.lastListenResults[0]);else if(this.state.lastListenResults.length>1){var a=Array.from(this.state.lastListenResults).map((function(e){return i.a.createElement("li",null,e)}));n=i.a.createElement("ol",null,a)}return i.a.createElement(ie,null,i.a.createElement(re,{onClick:function(){return e.listen()}},"Listen"),n)}},{key:"render",value:function(){var e=this,t={width:"960",height:"473",playerVars:{autoplay:0,start:70}};return i.a.createElement(ae,null,i.a.createElement("header",null,i.a.createElement(oe,null,"T.P.R.S. \u65e5\u672c\u8a9e")),i.a.createElement(v.a,{videoId:this.state.src,opts:t,onStateChange:function(t){return e.onPlayerStateChange(t)},onReady:function(t){return e.onPlayerReady(t)}}),this.renderContinueButton(),this.renderListener())}}]),n}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[49,1,2]]]);
//# sourceMappingURL=main.551d3f4a.chunk.js.map