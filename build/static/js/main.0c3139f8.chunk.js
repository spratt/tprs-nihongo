(this["webpackJsonptprs-nihongo"]=this["webpackJsonptprs-nihongo"]||[]).push([[0],{27:function(t,e,n){t.exports=n.p+"static/media/data.7afd0079.yaml"},34:function(t,e,n){t.exports=n(79)},39:function(t,e,n){},79:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(19),o=n.n(i),s=(n(39),n(32)),l=n(20),u=n(21),c=n(33),h=n(31),d=n(7),f=n(8),v=n(22),m=n.n(v),p=n(23),g=n(26);var y=n(27),k=n.n(y);function w(){var t=Object(d.a)(["\n  font-size: 2rem;\n  width: 100%;\n"]);return w=function(){return t},t}function b(){var t=Object(d.a)(["\n  padding-left: 1rem;\n  font-size: 1.5em;\n  color: orangered;\n"]);return b=function(){return t},t}function E(){var t=Object(d.a)([""]);return E=function(){return t},t}function C(){var t=Object(d.a)(["\n  @media screen and (min-width: 60rem) {\n  width: 60rem;\n  margin: 0 auto;\n  }\n"]);return C=function(){return t},t}var R=f.a.div(C()),T=f.a.span(E()),S=f.a.h1(b()),L=f.a.button(w()),j=function(t){Object(c.a)(n,t);var e=Object(h.a)(n);function n(t){var a,r,i;Object(l.a)(this,n),(a=e.call(this,t)).recognition=void 0,console.log("new App()"),(r="GET",i=k.a,new Promise((function(t,e){var n=new XMLHttpRequest;n.withCredentials=!0,n.addEventListener("load",(function(){200===n.status?t(n):e(n)})),n.addEventListener("error",(function(){e(n)})),n.addEventListener("abort",(function(){e(n)})),n.open(r,i),n.send()}))).then((function(t){m.a.load(t.response)})).catch((function(t){return console.error(t)})),a.state={src:"FsiAxc5T23g",stopTimes:[165,178],lastListenResults:[]};var o=window;return o.webkitSpeechRecognition&&(a.recognition=new o.webkitSpeechRecognition,a.recognition.lang="ja-JP",a.recognition.interimResults=!1,a.recognition.maxAlternatives=5,a.recognition.onresult=function(t){return a.listenCallback(t)}),a}return Object(u.a)(n,[{key:"play",value:function(){var t;null===(t=this.state.player)||void 0===t||t.playVideo(),this.forceUpdate()}},{key:"pause",value:function(){var t;null===(t=this.state.player)||void 0===t||t.pauseVideo(),this.forceUpdate()}},{key:"listenCallback",value:function(t){if(console.log("listenCallback"),console.dir(t),t.results.length>0){var e=Array.from(t.results[0]).map((function(t){var e=t.transcript,n=g.toKana(e);return console.log("".concat(e,"(").concat(n,")")),n===e?e:"".concat(e,"(").concat(n,")")}));this.setState({src:this.state.src,stopTimes:this.state.stopTimes,lastListenResults:e})}}},{key:"listen",value:function(){this.recognition.start()}},{key:"getNextStopTime",value:function(){var t,e,n,a=(null===(t=this.state.player)||void 0===t?void 0:t.getCurrentTime())||0,r=(null===(e=this.state.player)||void 0===e?void 0:e.getDuration())||0,i=Object(s.a)(this.state.stopTimes);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(a<o)return o}}catch(l){i.e(l)}finally{i.f()}return r}},{key:"onPlayerStateChange",value:function(t){var e=this;if(this.state.timer&&clearTimeout(this.state.timer),1===t.data){var n,a=(null===(n=this.state.player)||void 0===n?void 0:n.getCurrentTime())||0,r=this.getNextStopTime();if(a+.4<r){var i,o=(r-a)/((null===(i=this.state.player)||void 0===i?void 0:i.getPlaybackRate())||1);this.setState({src:this.state.src,stopTimes:this.state.stopTimes,timer:setTimeout((function(){return e.pause()}),1e3*o)})}}else this.setState({timer:null})}},{key:"onPlayerReady",value:function(t){this.setState({player:t.target})}},{key:"renderContinueButton",value:function(){var t,e=this,n="Continue ->",a=function(){return e.play()};return 1===(null===(t=this.state.player)||void 0===t?void 0:t.getPlayerState())&&(n="Pause ||",a=function(){return e.pause()}),r.a.createElement(L,{onClick:a},n)}},{key:"renderListener",value:function(){var t=this,e=r.a.createElement("span",null);if(!this.recognition)return e;var n=e;if(1===this.state.lastListenResults.length)n=r.a.createElement("p",null,this.state.lastListenResults[0]);else if(this.state.lastListenResults.length>1){var a=Array.from(this.state.lastListenResults).map((function(t){return r.a.createElement("li",null,t)}));n=r.a.createElement("ol",null,a)}return r.a.createElement(T,null,r.a.createElement(L,{onClick:function(){return t.listen()}},"Listen"),n)}},{key:"render",value:function(){var t=this,e={width:"960",height:"473",playerVars:{autoplay:0,start:70}};return r.a.createElement(R,null,r.a.createElement("header",null,r.a.createElement(S,null,"T.P.R.S. \u65e5\u672c\u8a9e")),r.a.createElement(p.a,{videoId:this.state.src,opts:e,onStateChange:function(e){return t.onPlayerStateChange(e)},onReady:function(e){return t.onPlayerReady(e)}}),this.renderContinueButton(),this.renderListener())}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.0c3139f8.chunk.js.map